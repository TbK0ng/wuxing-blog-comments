# å·¥å…·é“¾æ•´åˆå®æˆ˜æŒ‡å—

> **ç”¨é€”**ï¼šClaudeCodeå·¥å…·é“¾æ•´åˆçš„å®Œæ•´å®æˆ˜æŒ‡å—
> **ç‰ˆæœ¬**ï¼š2025å¹´12æœˆ
> **ä½œè€…**ï¼šå¤§ç†ŠæŒé—¨

## ğŸ“‹ ç›®å½•
1. [å¿«é€Ÿå¼€å§‹](#1-å¿«é€Ÿå¼€å§‹)
2. [Skillsä¸Pluginsæ•´åˆ](#2-skillsä¸pluginsæ•´åˆ)
3. [SubAgentså·¥ä½œæµè®¾è®¡](#3-subagentså·¥ä½œæµè®¾è®¡)
4. [é…ç½®ç®¡ç†æœ€ä½³å®è·µ](#4-é…ç½®ç®¡ç†æœ€ä½³å®è·µ)
5. [å¸¸è§é—®é¢˜è§£å†³](#5-å¸¸è§é—®é¢˜è§£å†³)

---

## 1. å¿«é€Ÿå¼€å§‹

### 1.1 åˆå§‹åŒ–å·¥å…·é“¾é¡¹ç›®

```bash
# åˆ›å»ºå·¥å…·é“¾é¡¹ç›®ç›®å½•
mkdir my-claude-toolchain
cd my-claude-toolchain

# åˆå§‹åŒ–é…ç½®
claude-code init
```

### 1.2 åŸºç¡€é…ç½®æ–‡ä»¶

**~/.claude/settings.json**ï¼š
```json
{
  "model": "claude-3-opus-20240229",
  "maxTokens": 4096,
  "skills": {
    "enabled": true,
    "paths": ["./skills", "~/.claude/skills"],
    "autoLoad": ["common", "development", "deployment"]
  },
  "plugins": {
    "enabled": true,
    "marketplace": "https://claudecodemarketplace.com",
    "autoUpdate": true
  },
  "subagents": {
    "defaultTeam": ["code-reviewer", "frontend-specialist", "backend-developer"]
  },
  "hooks": {
    "pre-edit": "backup-file",
    "post-edit": "format-and-test"
  }
}
```

### 1.3 é¡¹ç›®ç‰¹å®šé…ç½®

**é¡¹ç›®æ ¹ç›®å½•/.claude/project.json**ï¼š
```json
{
  "name": "my-web-app",
  "type": "fullstack",
  "techStack": {
    "frontend": "React",
    "backend": "Node.js",
    "database": "PostgreSQL",
    "deployment": "Docker"
  },
  "toolchain": {
    "skills": ["react-generator", "api-designer", "test-writer"],
    "plugins": ["github-integration", "docker-helper"],
    "subagents": ["fullstack-developer", "qa-engineer"]
  }
}
```

---

## 2. Skillsä¸Pluginsæ•´åˆ

### 2.1 åˆ›å»ºè‡ªå®šä¹‰Skills

**Reactç»„ä»¶ç”Ÿæˆå™¨**ï¼š
```markdown
# skills/react-generator/skill.md

## æŠ€èƒ½åç§°
Reactç»„ä»¶ç”Ÿæˆå™¨

## æè¿°
æ ¹æ®è®¾è®¡ç¨¿å’Œéœ€æ±‚å¿«é€Ÿç”ŸæˆReactç»„ä»¶ä»£ç 

## è¾“å…¥
- ç»„ä»¶åç§°
- Propså®šä¹‰
- æ ·å¼è¦æ±‚
- äº¤äº’éœ€æ±‚

## è¾“å‡º
- Reactç»„ä»¶ä»£ç (.jsx)
- æ ·å¼æ–‡ä»¶(.css)
- å•å…ƒæµ‹è¯•(.test.js)
- ç»„ä»¶æ–‡æ¡£(.md)
```

**skills/react-generator/instructions.md**ï¼š
```
ä½œä¸ºReactä¸“å®¶ï¼Œè¯·æ ¹æ®ä»¥ä¸‹è¦æ±‚ç”Ÿæˆç»„ä»¶ï¼š

1. ä½¿ç”¨å‡½æ•°ç»„ä»¶å’ŒHooks
2. éµå¾ªæœ€ä½³å®è·µå’Œå¯è®¿é—®æ€§æ ‡å‡†
3. ä½¿ç”¨TypeScriptç±»å‹å®šä¹‰
4. åŒ…å«é”™è¯¯è¾¹ç•Œå¤„ç†
5. ç¼–å†™å®Œæ•´çš„å•å…ƒæµ‹è¯•

è¾“å…¥å‚æ•°ï¼š{{input}}
è¾“å‡ºè¦æ±‚ï¼šå®Œæ•´çš„ç»„ä»¶åŒ…
```

### 2.2 æ’ä»¶å¼€å‘

**æ’ä»¶é…ç½®æ–‡ä»¶**ï¼š
```json
{
  "name": "my-awesome-plugin",
  "version": "1.0.0",
  "description": "è‡ªå®šä¹‰ClaudeCodeæ’ä»¶",
  "skills": ["react-generator", "api-designer"],
  "hooks": {
    "onInit": "setup-project",
    "onComplete": "generate-summary"
  },
  "mcpServers": {
    "my-api": {
      "command": "node",
      "args": ["mcp-server.js"]
    }
  }
}
```

**æ’ä»¶ä¸»æ–‡ä»¶**ï¼š
```javascript
// plugin.js
module.exports = {
  activate(context) {
    // æ’ä»¶æ¿€æ´»é€»è¾‘
    context.registerCommand('my-command', () => {
      // å‘½ä»¤å¤„ç†
    });
  },

  deactivate() {
    // æ’ä»¶åœç”¨é€»è¾‘
  }
};
```

### 2.3 Skillä¸PluginååŒç¤ºä¾‹

```yaml
# ååŒé…ç½®ç¤ºä¾‹
workflow:
  name: "component-development"

  steps:
    - name: "è®¾è®¡ç»„ä»¶"
      plugin: "design-tool"
      output: "design.json"

    - name: "ç”Ÿæˆä»£ç "
      skill: "react-generator"
      input: "design.json"
      output: "component.jsx"

    - name: "ç”Ÿæˆæµ‹è¯•"
      skill: "test-writer"
      input: "component.jsx"
      output: "component.test.js"

    - name: "ä»£ç å®¡æŸ¥"
      plugin: "code-review"
      input: ["component.jsx", "component.test.js"]
```

---

## 3. SubAgentså·¥ä½œæµè®¾è®¡

### 3.1 åŸºç¡€å·¥ä½œæµé…ç½®

**å·¥ä½œæµå®šä¹‰æ–‡ä»¶**ï¼š
```yaml
# workflows/feature-development.yaml
name: feature-development
description: ä»éœ€æ±‚åˆ°éƒ¨ç½²çš„å®Œæ•´å¼€å‘æµç¨‹

agents:
  - name: product-owner
    role: éœ€æ±‚åˆ†æ
    capabilities: ["requirements-gathering", "user-story-writing"]

  - name: architect
    role: ç³»ç»Ÿè®¾è®¡
    capabilities: ["system-design", "technical-specification"]

  - name: developer
    role: å¼€å‘å®ç°
    capabilities: ["coding", "debugging", "testing"]

  - name: reviewer
    role: ä»£ç å®¡æŸ¥
    capabilities: ["code-review", "security-check", "performance-analysis"]

  - name: deployer
    role: éƒ¨ç½²è¿ç»´
    capabilities: ["deployment", "monitoring", "troubleshooting"]

stages:
  - name: requirements
    agent: product-owner
    tasks:
      - analyze-requirements
      - write-user-stories
    output: "requirements.md"

  - name: design
    agent: architect
    depends_on: requirements
    tasks:
      - create-system-design
      - define-api-spec
    output: "design/"

  - name: development
    agent: developer
    depends_on: design
    parallel: true
    tasks:
      - implement-frontend
      - implement-backend
      - write-tests
    output: "src/"

  - name: review
    agent: reviewer
    depends_on: development
    tasks:
      - code-review
      - security-check
    output: "review-report.md"

  - name: deployment
    agent: deployer
    depends_on: review
    tasks:
      - prepare-deployment
      - deploy-to-staging
      - monitor-deployment
    output: "deployment-complete"
```

### 3.2 å¹¶è¡Œå·¥ä½œæµç¤ºä¾‹

**å¹¶è¡Œå¤„ç†é…ç½®**ï¼š
```yaml
# workflows/parallel-processing.yaml
name: parallel-processing
description: å¤šä»»åŠ¡å¹¶è¡Œå¤„ç†

stage: implementation
parallel: true

branches:
  - name: ui-development
    agent: frontend-developer
    tasks:
      - create-components
      - implement-styling
    output: "ui/"

  - name: api-development
    agent: backend-developer
    tasks:
      - create-endpoints
      - implement-business-logic
    output: "api/"

  - name: database
    agent: database-designer
    tasks:
      - design-schema
      - write-migrations
    output: "database/"

sync_point: integration
integration_agent: integration-specialist
```

### 3.3 åŠ¨æ€å·¥ä½œæµ

**åŸºäºæ¡ä»¶çš„åŠ¨æ€å·¥ä½œæµ**ï¼š
```python
# dynamic_workflow.py
class DynamicWorkflow:
    def __init__(self):
        self.rules = {
            'complexity': {
                'low': ['simple-review'],
                'medium': ['detailed-review', 'security-check'],
                'high': ['comprehensive-review', 'performance-test', 'security-audit']
            },
            'risk': {
                'low': ['basic-testing'],
                'medium': ['integration-testing'],
                'high': ['comprehensive-testing', 'penetration-testing']
            }
        }

    def generate_workflow(self, analysis_result):
        workflow = []

        # åŸºäºå¤æ‚åº¦é€‰æ‹©å®¡æŸ¥æµç¨‹
        complexity = analysis_result['complexity']
        workflow.extend(self.rules['complexity'][complexity])

        # åŸºäºé£é™©é€‰æ‹©æµ‹è¯•ç­–ç•¥
        risk = analysis_result['risk']
        workflow.extend(self.rules['risk'][risk])

        return workflow
```

---

## 4. é…ç½®ç®¡ç†æœ€ä½³å®è·µ

### 4.1 ç¯å¢ƒéš”ç¦»

**å¤šç¯å¢ƒé…ç½®**ï¼š
```json
{
  "environments": {
    "development": {
      "skills": ["debug-helper", "mock-generator"],
      "plugins": ["hot-reload", "local-db"],
      "hooks": {
        "on-save": "auto-format",
        "on-build": "run-tests"
      }
    },

    "staging": {
      "skills": ["performance-analyzer", "data-migrator"],
      "plugins": ["staging-deployer", "monitoring"],
      "hooks": {
        "pre-deploy": "full-test-suite",
        "post-deploy": "smoke-tests"
      }
    },

    "production": {
      "skills": ["security-scanner", "rollback-helper"],
      "plugins": ["blue-green-deploy", "real-time-monitoring"],
      "hooks": {
        "pre-deploy": "security-audit",
        "post-deploy": "health-checks"
      }
    }
  }
}
```

### 4.2 é…ç½®æ¨¡æ¿

**é¡¹ç›®æ¨¡æ¿**ï¼š
```json
{
  "templates": {
    "react-app": {
      "skills": ["react-generator", "css-modules", "jest-tester"],
      "plugins": ["webpack-helper", "eslint-config"],
      "subagents": ["react-specialist", "frontend-tester"]
    },

    "node-api": {
      "skills": ["express-generator", "api-designer", "jwt-helper"],
      "plugins": ["pm2-helper", "morgan-logger"],
      "subagents": ["backend-developer", "api-tester"]
    },

    "python-django": {
      "skills": ["django-generator", "orm-helper", "migration-writer"],
      "plugins": ["gunicorn-config", "django-debug"],
      "subagents": ["python-expert", "django-specialist"]
    }
  }
}
```

### 4.3 é…ç½®éªŒè¯

**é…ç½®éªŒè¯è„šæœ¬**ï¼š
```python
# config_validator.py
import json
import jsonschema

class ConfigValidator:
    def __init__(self):
        self.schema = {
            "type": "object",
            "properties": {
                "skills": {
                    "type": "object",
                    "properties": {
                        "enabled": {"type": "boolean"},
                        "paths": {"type": "array"}
                    }
                },
                "plugins": {
                    "type": "object",
                    "properties": {
                        "enabled": {"type": "boolean"},
                        "marketplace": {"type": "string"}
                    }
                }
            }
        }

    def validate(self, config):
        try:
            jsonschema.validate(config, self.schema)
            return {"valid": True, "errors": []}
        except Exception as e:
            return {"valid": False, "errors": [str(e)]}
```

---

## 5. å¸¸è§é—®é¢˜è§£å†³

### 5.1 æ€§èƒ½é—®é¢˜

**ä¼˜åŒ–ç­–ç•¥**ï¼š
```yaml
# performance-optimization.yaml
optimization:
  cache:
    enable: true
    ttl: 3600
    max_size: 1000

  batching:
    enabled: true
    batch_size: 10
    timeout: 30

  parallelism:
    max_workers: 4
    queue_size: 100
```

### 5.2 å†²çªè§£å†³

**å†²çªè§£å†³ç­–ç•¥**ï¼š
```json
{
  "conflict_resolution": {
    "strategy": "merge-prompt",
    "rules": [
      {
        "condition": "same_file",
        "action": "create_merge_prompt"
      },
      {
        "condition": "dependency_conflict",
        "action": "ask_user"
      },
      {
        "condition": "skill_conflict",
        "action": "priority_based"
      }
    ]
  }
}
```

### 5.3 è°ƒè¯•æŠ€å·§

**è°ƒè¯•é…ç½®**ï¼š
```json
{
  "debug": {
    "enabled": true,
    "log_level": "verbose",
    "log_file": "./logs/claude-debug.log",
    "trace": {
      "skills": true,
      "plugins": true,
      "hooks": true,
      "subagents": true
    }
  }
}
```

### 5.4 é”™è¯¯æ¢å¤

**è‡ªåŠ¨æ¢å¤æœºåˆ¶**ï¼š
```python
# error_recovery.py
class ErrorRecovery:
    def __init__(self):
        self.retry_strategies = {
            "network_error": {"max_retries": 3, "backoff": 1000},
            "timeout_error": {"max_retries": 2, "backoff": 2000},
            "dependency_error": {"max_retries": 1, "backoff": 0}
        }

    async def execute_with_recovery(self, task, error_type):
        strategy = self.retry_strategies.get(error_type, {"max_retries": 0})

        for attempt in range(strategy["max_retries"] + 1):
            try:
                return await task.execute()
            except Exception as e:
                if attempt == strategy["max_retries"]:
                    raise
                await asyncio.sleep(strategy["backoff"])
```

---

## ğŸš€ è¿›é˜¶æŠ€å·§

### 1. å·¥å…·é“¾å¸‚åœºé›†æˆ

```bash
# ä»å¸‚åœºå®‰è£…å·¥å…·é“¾
claude-code marketplace install react-toolchain
claude-code marketplace install python-toolchain

# åˆ›å»ºè‡ªå®šä¹‰å·¥å…·é“¾åŒ…
claude-code package create my-toolchain
```

### 2. å›¢é˜Ÿå…±äº«é…ç½®

```bash
# å¯¼å‡ºå›¢é˜Ÿé…ç½®
claude-code config export --team --output team-config.json

# å¯¼å…¥å›¢é˜Ÿé…ç½®
claude-code config import team-config.json
```

### 3. æŒç»­é›†æˆ

```yaml
# .github/workflows/toolchain-update.yml
name: Update Toolchain
on:
  schedule:
    - cron: '0 0 * * *'  # æ¯å¤©æ›´æ–°

jobs:
  update:
    runs-on: ubuntu-latest
    steps:
      - name: Update plugins
        run: claude-code plugins update --all

      - name: Update skills
        run: claude-code skills update --all

      - name: Validate config
        run: claude-code config validate
```

---

## ğŸ’¡ æœ€ä½³å®è·µæ€»ç»“

1. **æ¸è¿›å¼é‡‡ç”¨**ï¼šä»ç®€å•åœºæ™¯å¼€å§‹ï¼Œé€æ­¥å¢åŠ å¤æ‚æ€§
2. **ç‰ˆæœ¬æ§åˆ¶**ï¼šå°†æ‰€æœ‰é…ç½®çº³å…¥ç‰ˆæœ¬æ§åˆ¶
3. **æ–‡æ¡£å…ˆè¡Œ**ï¼šä¸ºè‡ªå®šä¹‰ç»„ä»¶ç¼–å†™å®Œæ•´æ–‡æ¡£
4. **æµ‹è¯•é©±åŠ¨**ï¼šä¸ºå·¥å…·é“¾ç¼–å†™æµ‹è¯•ç”¨ä¾‹
5. **æŒç»­ä¼˜åŒ–**ï¼šæ ¹æ®ä½¿ç”¨åé¦ˆæŒç»­æ”¹è¿›

---

**ç«‹å³å¼€å§‹æ„å»ºä½ çš„å·¥å…·é“¾ï¼Œè®©å¼€å‘æ•ˆç‡é£è·ƒæå‡ï¼**