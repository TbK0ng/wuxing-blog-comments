# 必装10个插件详解

> **课程**：ClaudeCode纯干货教程第7课 - Plugins插件生态
> **用途**：详细介绍10个必装插件的安装、配置和使用

## 📦 安装准备

### 添加官方插件市场

```bash
# 添加Anthropic官方插件市场
/plugin marketplace add anthropics/claude-code

# 添加社区插件市场
/plugin marketplace add claudecode-community/plugins

# 查看可用插件列表
/plugin list
```

---

## 1️⃣ Claude Code Builder

**用途**：快速创建自定义skills和agents，生成工作流命令

### 安装
```bash
/plugin install claude-code-builder@claude-code-builder
```

### 配置
```json
// .claude-plugin/plugin.json 添加依赖
{
    "dependencies": {
        "plugins": ["claude-code-builder"]
    },
    "configuration": {
        "defaultSettings": {
            "templatesPath": "./templates",
            "outputPath": "./generated",
            "language": "javascript"
        }
    }
}
```

### 主要功能
- **快速创建Skills**：`/create-skill skill-name "Description"`
- **生成Agent**：`/create-agent agent-name "Specialization"`
- **工作流生成**：`/create-workflow workflow-name`

### 使用示例
```bash
# 创建一个代码审查skill
/create-skill code-reviewer "Reviews code for best practices and security issues"

# 生成一个测试agent
/create-agent test-automation "Handles automated testing setup and execution"
```

---

## 2️⃣ DevOps Automation

**用途**：CI/CD流水线集成，容器管理，GitHub Actions工作流

### 安装
```bash
/plugin install devops-automation@anthropics
```

### 配置
```json
// .mcp.json 添加DevOps工具
{
    "mcpServers": {
        "jenkins": {
            "command": "npx",
            "args": ["-y", "@modelcontextprotocol/server-jenkins"],
            "env": {
                "JENKINS_URL": "${JENKINS_URL}",
                "JENKINS_TOKEN": "${JENKINS_TOKEN}"
            }
        },
        "github-actions": {
            "command": "npx",
            "args": ["-y", "@modelcontextprotocol/server-github-actions"],
            "env": {
                "GITHUB_TOKEN": "${GITHUB_TOKEN}"
            }
        }
    }
}
```

### 核心命令
- `/deploy [environment]` - 部署到指定环境
- `/pipeline status` - 查看CI/CD状态
- `/rollback [version]` - 回滚到指定版本

### 使用示例
```bash
# 部署到staging环境
/deploy staging

# 查看所有流水线状态
/pipeline status

# 创建GitHub Actions工作流
/create-workflow deploy-staging.yml
```

---

## 3️⃣ Security Toolkit

**用途**：代码安全扫描，OWASP Top 10检查，依赖漏洞检测

### 安装
```bash
/plugin install security-toolkit@security-experts
```

### 配置
```json
{
    "dependencies": {
        "tools": ["npm", "safety", "bandit"],
        "plugins": ["security-toolkit"]
    },
    "configuration": {
        "defaultSettings": {
            "scanOnCommit": true,
            "severityThreshold": "medium",
            "excludePatterns": ["*.test.js", "node_modules/**"]
        }
    }
}
```

### 安全扫描功能
- `/security scan` - 执行完整安全扫描
- `/security check dependencies` - 检查依赖漏洞
- `/security audit [file]` - 审计特定文件

### 使用示例
```bash
# 执行完整安全扫描
/security scan

# 检查npm依赖漏洞
/security check dependencies

# 生成安全报告
/security report --format json > security-report.json
```

---

## 4️⃣ Database Tools

**用途**：数据库连接管理，SQL查询优化，迁移脚本生成

### 安装
```bash
/plugin install database-tools@db-community
```

### 配置
```json
// .mcp.json 添加数据库服务器
{
    "mcpServers": {
        "postgresql": {
            "command": "npx",
            "args": ["-y", "@modelcontextprotocol/server-postgres"],
            "env": {
                "DATABASE_URL": "${DATABASE_URL}"
            }
        },
        "mysql": {
            "command": "npx",
            "args": ["-y", "@modelcontextprotocol/server-mysql"],
            "env": {
                "MYSQL_HOST": "${MYSQL_HOST}",
                "MYSQL_USER": "${MYSQL_USER}",
                "MYSQL_PASSWORD": "${MYSQL_PASSWORD}"
            }
        }
    }
}
```

### 数据库命令
- `/db connect [database]` - 连接数据库
- `/db query "SQL"` - 执行SQL查询
- `/db optimize [table]` - 优化表结构
- `/db migrate` - 运行迁移

### 使用示例
```bash
# 连接到生产数据库
/db connect production

# 执行查询
/db query "SELECT * FROM users WHERE active = true"

# 生成迁移文件
/db generate-migration add_user_avatar
```

---

## 5️⃣ API Development Suite

**用途**：REST API文档生成，Postman集合导出，API测试自动化

### 安装
```bash
/plugin install api-suite@api-devs
```

### 配置
```json
{
    "components": {
        "agents": ["api-tester", "api-documenter"],
        "commands": ["api-test", "api-doc", "api-export"]
    },
    "configuration": {
        "defaultSettings": {
            "testEnvironment": "staging",
            "documentationFormat": "openapi3",
            "postmanCollection": true
        }
    }
}
```

### API工具功能
- `/api-test [endpoint]` - 测试API端点
- `/api-doc generate` - 生成API文档
- `/api-export postman` - 导出Postman集合

### 使用示例
```bash
# 测试所有API端点
/api-test --all

# 生成OpenAPI文档
/api-doc generate --format openapi3

# 创建API测试套件
/api create-test-suite authentication
```

---

## 6️⃣ Documentation Helper

**用途**：README自动生成，API文档更新，变更日志维护

### 安装
```bash
/plugin install docs-helper@tech-writers
```

### 配置
```json
{
    "configuration": {
        "defaultSettings": {
            "readmeTemplate": "standard",
            "apiDocsFormat": "markdown",
            "changelogFormat": "keepachangelog"
        }
    }
}
```

### 文档功能
- `/docs generate readme` - 生成README
- `/docs update api` - 更新API文档
- `/docs changelog [version]` - 生成变更日志

### 使用示例
```bash
# 生成项目README
/docs generate readme --template comprehensive

# 更新API文档
/docs update api --source src/api

# 创建发布笔记
/docs changelog 1.2.0 --release-notes
```

---

## 7️⃣ Testing Framework

**用途**：自动化测试设置，测试覆盖率分析，性能测试

### 安装
```bash
/plugin install testing-framework@testing-community
```

### 配置
```json
{
    "dependencies": {
        "tools": ["jest", "cypress", "artillery"]
    },
    "configuration": {
        "defaultSettings": {
            "testFramework": "jest",
            "coverageThreshold": 80,
            "performanceTests": true
        }
    }
}
```

### 测试命令
- `/test run` - 运行所有测试
- `/test coverage` - 生成覆盖率报告
- `/test performance` - 执行性能测试

### 使用示例
```bash
# 运行单元测试
/test run --unit

# 生成覆盖率报告
/test coverage --threshold 90

# 运行端到端测试
/test run --e2e
```

---

## 8️⃣ Code Quality Tools

**用途**：代码格式化，静态分析，代码质量评分

### 安装
```bash
/plugin install code-quality@quality-experts
```

### 配置
```json
{
    "hooks": {
        "pre-commit": "code-quality-check",
        "pre-push": "full-quality-report"
    },
    "configuration": {
        "defaultSettings": {
            "linter": "eslint",
            "formatter": "prettier",
            "qualityThreshold": "B"
        }
    }
}
```

### 质量检查
- `/quality check` - 执行质量检查
- `/quality score` - 获取质量评分
- `/quality fix` - 自动修复问题

### 使用示例
```bash
# 检查代码质量
/quality check

# 生成质量报告
/quality report --format html

# 自动修复可修复的问题
/quality fix --auto
```

---

## 9️⃣ Environment Manager

**用途**：多环境配置管理，环境变量同步，配置验证

### 安装
```bash
/plugin install env-manager@devops-tools
```

### 配置
```json
{
    "configuration": {
        "defaultSettings": {
            "environments": ["dev", "staging", "prod"],
            "configPath": "./config",
            "encryptionEnabled": true
        }
    }
}
```

### 环境管理
- `/env switch [environment]` - 切换环境
- `/env sync` - 同步环境变量
- `/env validate` - 验证配置

### 使用示例
```bash
# 切换到生产环境
/env switch prod

# 同步所有环境配置
/env sync --all

# 验证当前环境配置
/env validate
```

---

## 🔟 Performance Monitor

**用途**：性能监控，瓶颈分析，资源优化建议

### 安装
```bash
/plugin install perf-monitor@performance-tools
```

### 配置
```json
// .mcp.json 添加监控工具
{
    "mcpServers": {
        "prometheus": {
            "command": "npx",
            "args": ["-y", "@modelcontextprotocol/server-prometheus"],
            "env": {
                "PROMETHEUS_URL": "${PROMETHEUS_URL}"
            }
        }
    }
}
```

### 监控功能
- `/perf status` - 查看性能状态
- `/perf analyze [component]` - 分析组件性能
- `/perf optimize` - 获取优化建议

### 使用示例
```bash
# 查看系统性能状态
/perf status

# 分析数据库性能
/perf analyze database

# 生成性能报告
/perf report --period 24h
```

## 🔧 插件组合示例

### 完整的开发工作流

```bash
# 1. 代码开发完成后
/code-quality check
/security scan

# 2. 运行测试
/test run --coverage

# 3. 部署到staging
/deploy staging

# 4. 执行API测试
/api-test --env staging

# 5. 性能检查
/perf analyze --env staging

# 6. 生成文档
/docs update api
/docs changelog

# 7. 部署到生产
/deploy production
```

## 📝 插件管理最佳实践

### 1. 版本管理
```bash
# 查看插件版本
/plugin info plugin-name

# 更新插件
/plugin update plugin-name

# 锁定版本（在plugin.json中）
{
    "dependencies": {
        "plugins": {
            "security-toolkit": "2.1.0"
        }
    }
}
```

### 2. 环境隔离
```bash
# 为不同环境创建不同配置
cp .mcp.json .mcp.dev.json
cp .mcp.json .mcp.prod.json

# 使用环境特定配置
export MCP_CONFIG=.mcp.${ENV}.json
```

### 3. 性能优化
- 只启用必要的插件
- 定期清理不使用的插件
- 使用插件缓存减少启动时间

### 4. 安全考虑
- 定期更新插件到最新版本
- 审查插件权限要求
- 使用私有插件市场

## 🚀 快速开始脚本

创建一个快速安装所有必装插件的脚本：

```bash
#!/bin/bash
# install-essential-plugins.sh

# 添加官方市场
/plugin marketplace add anthropics/claude-code

# 必装插件列表
plugins=(
    "claude-code-builder@claude-code-builder"
    "devops-automation@anthropics"
    "security-toolkit@security-experts"
    "database-tools@db-community"
    "api-suite@api-devs"
    "docs-helper@tech-writers"
    "testing-framework@testing-community"
    "code-quality@quality-experts"
    "env-manager@devops-tools"
    "perf-monitor@performance-tools"
)

# 批量安装
for plugin in "${plugins[@]}"; do
    echo "Installing $plugin..."
    /plugin install $plugin
done

echo "All essential plugins installed!"
```

---

> **提示**：建议先安装1-2个核心插件，熟悉后再逐步添加其他插件，避免一次性安装过多导致配置复杂。